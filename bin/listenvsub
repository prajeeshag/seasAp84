#!/bin/bash

# Script name: list_env_vars.sh

# Check if at least one input file is provided
if [ $# -lt 1 ]; then
    echo "Usage: $0 input_template_file1 [input_template_file2 ...]"
    exit 1
fi

# Initialize an empty array to hold the unique variable names
declare -A vars

# Define a function to extract variables from a file
extract_vars() {
    local file=$1
    grep -oE '\$([a-zA-Z_][a-zA-Z0-9_]*|\{[a-zA-Z_][a-zA-Z0-9_]*\})' "$file" | while read -r var; do
        # Strip the $ and ${} from the variable name
        var_name=${var#\$}
        var_name=${var_name#\{}
        var_name=${var_name%\}}
        vars["$var_name"]=1
        echo $var_name 
    done
}

# Loop through all input files and extract variables
for input_file in "$@"; do
    if [ -f "$input_file" ]; then
        extract_vars "$input_file"
    else
        echo "Warning: File \"$input_file\" not found. Skipping."
    fi
done
